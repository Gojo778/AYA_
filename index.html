<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For AYA</title>
  <style>
    :root{
      --bg:#ffd7e5;
      --bg2:#ffe9f1;
      --card:#ffffffcc;
      --ink:#3b1b2b;
      --muted:#6a3a52;
      --accent:#ff6fa3;
      --accent2:#ffb6cf;
      --shadow: 0 18px 45px rgba(0,0,0,.15);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background:
        radial-gradient(900px 700px at 15% 25%, #ff6fa340, transparent 55%),
        radial-gradient(700px 600px at 85% 30%, #ffb6cf55, transparent 60%),
        linear-gradient(135deg, var(--bg), var(--bg2));
      display:grid;
      place-items:center;
      padding:18px;
    }
    .app{ width:min(980px, 100%); display:grid; gap:14px; }
    .card{
      background: var(--card);
      border: 1px solid #ffffff;
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding:18px;
      position:relative;
      overflow:hidden;
    }
    .hidden{display:none !important;}

    .paper{
      background:
        radial-gradient(1px 1px at 20% 25%, #00000010 50%, transparent 51%),
        radial-gradient(1px 1px at 70% 65%, #00000010 50%, transparent 51%),
        radial-gradient(1px 1px at 40% 80%, #00000010 50%, transparent 51%),
        linear-gradient(180deg, #ffffffd8, #ffffffc8);
    }

    .intro{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      align-items:center;
    }
    @media(max-width:860px){ .intro{grid-template-columns:1fr;} }

    .title{
      font-size: clamp(30px, 4vw, 52px);
      margin:0 0 6px;
      line-height:1.05;
      letter-spacing:-.02em;
    }
    .subtitle{
      margin:0 0 14px;
      color:var(--muted);
      line-height:1.7;
      font-size:15px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:12px 16px;
      border-radius:14px;
      border:0;
      cursor:pointer;
      font-weight:900;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#3b1124;
      box-shadow: 0 14px 26px rgba(255,111,163,.25);
    }
    .btn:active{transform:translateY(1px)}
    .btn.secondary{
      background:#ffffffcc;
      border:1px solid #ffffff;
      box-shadow:none;
      color:var(--ink);
      font-weight:900;
    }

    .tag{
      font-size:13px;
      color:var(--muted);
      background:#ffffffb8;
      border:1px solid #ffffff;
      padding:8px 10px;
      border-radius:999px;
      text-align:center;
      font-weight:800;
    }

    /* Cute bear */
    .bearStage{ display:grid; place-items:center; min-height:220px; }
    .bearWrap{ display:grid; place-items:center; gap:10px; }
    .bear{
      width:150px; height:150px;
      position:relative;
      animation: bounce 1.05s ease-in-out infinite;
      filter: drop-shadow(0 16px 22px rgba(0,0,0,.12));
    }
    @keyframes bounce{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-14px)} }
    .bear .head{
      width:112px;height:102px;
      border-radius: 60px 60px 52px 52px;
      background: #caa07d;
      position:absolute; left:19px; top:26px;
    }
    .bear .ear{
      width:38px;height:38px;border-radius:50%;
      background:#caa07d; position:absolute; top:14px;
    }
    .bear .ear.left{left:16px}
    .bear .ear.right{right:16px}
    .bear .ear:after{content:""; position:absolute; inset:10px; background:#e7c4a7; border-radius:50%;}
    .bear .face{
      width:86px;height:72px;border-radius: 46px;
      background:#e7c4a7; position:absolute; left:32px; top:52px;
    }
    .bear .eye{
      width:10px;height:10px;border-radius:50%;
      background:#2b1b22; position:absolute; top:66px;
    }
    .bear .eye.left{left:50px}
    .bear .eye.right{left:94px}
    .bear .nose{
      width:18px;height:14px;border-radius: 10px 10px 12px 12px;
      background:#2b1b22; position:absolute; left:69px; top:84px;
    }
    .bear .mouth{
      position:absolute; left:58px; top:98px;
      width:40px;height:18px;
      border-bottom:3px solid #2b1b22;
      border-radius: 0 0 40px 40px;
    }
    .bear .heart{
      position:absolute; right:6px; top:10px;
      font-size:22px; animation: pop 1.05s ease-in-out infinite;
    }
    @keyframes pop{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.18)} }

    /* Hub */
    .hub{
      display:grid;
      gap:10px;
      margin-top:10px;
    }
    .gameGrid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media(max-width:860px){ .gameGrid{grid-template-columns:1fr;} }
    .gameCard{
      border:1px solid #ffffff;
      background:#ffffffa8;
      border-radius:18px;
      padding:14px;
      display:grid;
      gap:10px;
      box-shadow: 0 10px 20px rgba(0,0,0,.06);
    }
    .gameCard h3{
      margin:0;
      font-size:18px;
      letter-spacing:-.01em;
    }
    .gameCard p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }

    /* Game screens common */
    .topbar{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .stats{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }

    /* Catch hearts */
    .playfield{
      position:relative;
      width:100%;
      height: min(520px, 68vh);
      border-radius:18px;
      border:2px solid #ffffff;
      background: linear-gradient(180deg, #fff, #fff6fb);
      box-shadow: var(--shadow);
      overflow:hidden;
      touch-action: manipulation;
    }
    .heartBtn{
      position:absolute;
      width:58px;
      height:58px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      background: #ffffff;
      box-shadow: 0 14px 26px rgba(0,0,0,.12);
      font-size:28px;
      display:grid;
      place-items:center;
      user-select:none;
    }
    .heartBtn:active{transform:translateY(1px)}

    /* Memory */
    .memoryGrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }
    @media(max-width:520px){ .memoryGrid{grid-template-columns: repeat(3, 1fr);} }
    .tile{
      border-radius:16px;
      border:1px solid #ffffff;
      background:#ffffffb8;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      height:72px;
      cursor:pointer;
      display:grid;
      place-items:center;
      font-size:26px;
      font-weight:900;
      user-select:none;
    }
    .tile.revealed{background:#fff; border-color:#ffe2ed}
    .tile.matched{background:#fff5fa; border-color:#ffb6cf}

    /* Quiz */
    .quizBox{
      border-radius:18px;
      border:1px solid #ffffff;
      background:#ffffffb8;
      box-shadow: 0 10px 20px rgba(0,0,0,.08);
      padding:14px;
      display:grid;
      gap:12px;
    }
    .q{
      margin:0;
      font-size:18px;
      font-weight:900;
      color:var(--ink);
      line-height:1.35;
    }
    .opts{display:grid; gap:10px}
    .opt{
      text-align:left;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid #ffffff;
      background:#ffffff;
      cursor:pointer;
      font-weight:900;
      color:var(--ink);
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
    }
    .opt:active{transform:translateY(1px)}

    /* Modal */
    .modal{
      position:fixed; inset:0;
      display:none; place-items:center;
      padding:18px;
      background: rgba(0,0,0,.35);
      z-index:9999;
    }
    .modal.show{display:grid}
    .modalCard{
      width:min(760px, 100%);
      border-radius: 22px;
      background: linear-gradient(180deg, #fff, #fff7fb);
      border: 1px solid #ffffff;
      box-shadow: 0 22px 60px rgba(0,0,0,.18);
      padding:18px;
    }
    .modalHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .modalHeader .close{
      border:1px solid #ffffff;
      background:#ffffff;
      border-radius:14px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
    }
    .msg{
      margin:0;
      font-size: clamp(18px, 2.4vw, 24px);
      line-height:1.55;
      color:var(--ink);
      font-weight:900;
    }
    .msg2{
      margin:10px 0 0;
      font-size:16px;
      line-height:1.6;
      color:var(--muted);
      font-weight:800;
    }
    .modalActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
      justify-content:flex-end;
    }
  </style>
</head>

<body>
  <div class="app">

    <!-- INTRO -->
    <section class="card paper" id="screenIntro">
      <div class="intro">
        <div>
          <h1 class="title">Hello <span style="color:var(--accent)">My Baby!</span></h1>
          <p class="subtitle">Do you want to play a game?</p>
          <button class="btn" id="btnStart">Yes! I want to play</button>

          <div class="hub">
            <div class="tag">3 cute mini-games made for AYA ‚ù§Ô∏è</div>
            <div class="tag">iPhone friendly: tap only (no keyboard needed)</div>

            <div class="gameGrid" aria-label="Game list">
              <div class="gameCard">
                <h3>1) Catch the Hearts</h3>
                <p>Tap hearts quickly before time ends.</p>
              </div>
              <div class="gameCard">
                <h3>2) Memory Match</h3>
                <p>Find matching pairs of cute icons.</p>
              </div>
              <div class="gameCard">
                <h3>3) Love Quiz</h3>
                <p>Answer cute questions to unlock the final message.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="bearStage">
          <div class="bearWrap">
            <div class="bear" aria-hidden="true">
              <div class="ear left ear"></div>
              <div class="ear right ear"></div>
              <div class="head"></div>
              <div class="face"></div>
              <div class="eye left eye"></div>
              <div class="eye right eye"></div>
              <div class="nose"></div>
              <div class="mouth"></div>
              <div class="heart">‚ù§Ô∏è</div>
            </div>
            <div class="tag">üß∏ Bear is jumping for AYA</div>
          </div>
        </div>
      </div>
    </section>

    <!-- GAME HUB -->
    <section class="card hidden" id="screenHub">
      <div class="topbar">
        <div class="tag">Choose a game ‚ù§Ô∏è</div>
        <button class="btn secondary" id="btnHome1">Home</button>
      </div>

      <div class="gameGrid">
        <div class="gameCard">
          <h3>Catch the Hearts</h3>
          <p>Goal: score 12+ in 20 seconds.</p>
          <button class="btn" id="goCatch">Play</button>
        </div>
        <div class="gameCard">
          <h3>Memory Match</h3>
          <p>Goal: match all pairs.</p>
          <button class="btn" id="goMemory">Play</button>
        </div>
        <div class="gameCard">
          <h3>Love Quiz</h3>
          <p>Goal: 3 correct answers.</p>
          <button class="btn" id="goQuiz">Play</button>
        </div>
      </div>

      <div style="margin-top:12px; display:grid; gap:8px;">
        <div class="tag" id="progressTag">Progress: 0/3 completed</div>
      </div>
    </section>

    <!-- GAME 1: CATCH HEARTS -->
    <section class="card hidden" id="screenCatch">
      <div class="topbar">
        <div class="stats">
          <div class="tag">Game 1: Catch the Hearts</div>
          <div class="tag">Score: <span id="catchScore">0</span></div>
          <div class="tag">Time: <span id="catchTime">20</span>s</div>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn secondary" id="btnHubFromCatch">Back</button>
          <button class="btn" id="btnCatchStart">Start</button>
        </div>
      </div>

      <div class="playfield" id="playfield" aria-label="Tap the hearts"></div>

      <div style="margin-top:10px; display:grid; gap:8px;">
        <div class="tag">Tip: Tap fast. You got this, AYA ‚ù§Ô∏è</div>
      </div>
    </section>

    <!-- GAME 2: MEMORY -->
    <section class="card hidden" id="screenMemory">
      <div class="topbar">
        <div class="stats">
          <div class="tag">Game 2: Memory Match</div>
          <div class="tag">Moves: <span id="memMoves">0</span></div>
          <div class="tag">Matched: <span id="memMatched">0</span>/<span id="memTotal">6</span></div>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn secondary" id="btnHubFromMem">Back</button>
          <button class="btn" id="btnMemRestart">Restart</button>
        </div>
      </div>

      <div class="memoryGrid" id="memoryGrid" aria-label="Memory tiles"></div>

      <div style="margin-top:10px; display:grid; gap:8px;">
        <div class="tag">Cute brain mode: ON üíó</div>
      </div>
    </section>

    <!-- GAME 3: QUIZ -->
    <section class="card hidden" id="screenQuiz">
      <div class="topbar">
        <div class="stats">
          <div class="tag">Game 3: Love Quiz</div>
          <div class="tag">Correct: <span id="quizCorrect">0</span>/3</div>
        </div>
        <button class="btn secondary" id="btnHubFromQuiz">Back</button>
      </div>

      <div class="quizBox">
        <p class="q" id="qText">Question</p>
        <div class="opts" id="qOpts"></div>
      </div>

      <div style="margin-top:10px; display:grid; gap:8px;">
        <div class="tag">Answer with your heart ‚ù§Ô∏è</div>
      </div>
    </section>

  </div>

  <!-- MODAL -->
  <div class="modal" id="modal">
    <div class="modalCard">
      <div class="modalHeader">
        <div class="tag" id="modalTitle">Message</div>
        <button class="close" id="modalClose">Close</button>
      </div>
      <p class="msg" id="modalMsg1"></p>
      <p class="msg2" id="modalMsg2"></p>
      <div class="modalActions">
        <button class="btn secondary" id="modalBack">Back to games</button>
        <button class="btn" id="modalNext">Next</button>
      </div>
    </div>
  </div>

  <script>
    // ========= SETTINGS =========
    const HER_NAME = "AYA";

    // ========= SCREEN NAV =========
    const screens = {
      intro:  document.getElementById("screenIntro"),
      hub:    document.getElementById("screenHub"),
      catch:  document.getElementById("screenCatch"),
      memory: document.getElementById("screenMemory"),
      quiz:   document.getElementById("screenQuiz"),
    };
    function show(name){
      Object.values(screens).forEach(s => s.classList.add("hidden"));
      screens[name].classList.remove("hidden");
    }

    const progressTag = document.getElementById("progressTag");
    let completed = { catch:false, memory:false, quiz:false };
    function updateProgress(){
      const n = Object.values(completed).filter(Boolean).length;
      progressTag.textContent = `Progress: ${n}/3 completed`;
    }

    document.getElementById("btnStart").addEventListener("click", () => {
      show("hub");
      updateProgress();
    });
    document.getElementById("btnHome1").addEventListener("click", () => show("intro"));

    document.getElementById("goCatch").addEventListener("click", () => show("catch"));
    document.getElementById("goMemory").addEventListener("click", () => { show("memory"); memInit(); });
    document.getElementById("goQuiz").addEventListener("click", () => { show("quiz"); quizReset(); });

    document.getElementById("btnHubFromCatch").addEventListener("click", () => show("hub"));
    document.getElementById("btnHubFromMem").addEventListener("click", () => show("hub"));
    document.getElementById("btnHubFromQuiz").addEventListener("click", () => show("hub"));

    // ========= MODAL =========
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const modalMsg1 = document.getElementById("modalMsg1");
    const modalMsg2 = document.getElementById("modalMsg2");
    const modalClose = document.getElementById("modalClose");
    const modalBack = document.getElementById("modalBack");
    const modalNext = document.getElementById("modalNext");

    let modalNextAction = null;

    function openModal(title, m1, m2, nextLabel="Next", nextAction=null){
      modalTitle.textContent = title;
      modalMsg1.textContent = m1;
      modalMsg2.textContent = m2;
      modalNext.textContent = nextLabel;
      modalNextAction = nextAction;
      modal.classList.add("show");
    }
    function closeModal(){ modal.classList.remove("show"); }

    modalClose.addEventListener("click", closeModal);
    modalBack.addEventListener("click", () => { closeModal(); show("hub"); });
    modal.addEventListener("click", (e) => { if(e.target === modal) closeModal(); });
    modalNext.addEventListener("click", () => {
      closeModal();
      if(typeof modalNextAction === "function") modalNextAction();
      else show("hub");
    });

    // ========= GAME 1: CATCH HEARTS =========
    const playfield = document.getElementById("playfield");
    const catchScoreEl = document.getElementById("catchScore");
    const catchTimeEl  = document.getElementById("catchTime");
    const btnCatchStart = document.getElementById("btnCatchStart");

    let catchScore = 0;
    let catchTime  = 20;
    let catchTimer = null;
    let spawnTimer = null;
    let catchRunning = false;

    function clearHearts(){
      playfield.querySelectorAll(".heartBtn").forEach(h => h.remove());
    }
    function spawnHeart(){
      if(!catchRunning) return;
      const h = document.createElement("button");
      h.className = "heartBtn";
      h.type = "button";
      h.textContent = "‚ù§Ô∏è";

      const pad = 10;
      const w = playfield.clientWidth;
      const hgt = playfield.clientHeight;
      const x = Math.random() * (w - 58 - pad*2) + pad;
      const y = Math.random() * (hgt - 58 - pad*2) + pad;

      h.style.left = `${x}px`;
      h.style.top  = `${y}px`;

      const ttl = 650 + Math.random() * 450; // time before disappearing
      const timeout = setTimeout(() => { h.remove(); }, ttl);

      h.addEventListener("click", () => {
        clearTimeout(timeout);
        h.remove();
        catchScore++;
        catchScoreEl.textContent = catchScore;
      });

      playfield.appendChild(h);
    }

    function catchStop(){
      catchRunning = false;
      clearInterval(catchTimer);
      clearInterval(spawnTimer);
      catchTimer = null;
      spawnTimer = null;
      btnCatchStart.textContent = "Start";
      clearHearts();

      // win rule
      if(catchScore >= 12){
        completed.catch = true;
        updateProgress();
        openModal(
          "Game 1 complete ‚ù§Ô∏è",
          `You‚Äôre fast, ${HER_NAME}! That was cute.`,
          `Muaah‚Ä¶ you have magic fingers (for tapping hearts üòå).`,
          "Go to Game 2",
          () => { show("memory"); memInit(); }
        );
      } else {
        openModal(
          "Almost!",
          `You got ${catchScore}. Need 12 to win.`,
          `Try again, my baby ‚ù§Ô∏è`,
          "Retry",
          () => show("catch")
        );
      }
    }

    function catchStart(){
      catchScore = 0;
      catchTime = 20;
      catchRunning = true;
      catchScoreEl.textContent = catchScore;
      catchTimeEl.textContent = catchTime;
      btnCatchStart.textContent = "Stop";

      clearHearts();

      spawnTimer = setInterval(spawnHeart, 260);
      catchTimer = setInterval(() => {
        catchTime--;
        catchTimeEl.textContent = catchTime;
        if(catchTime <= 0) catchStop();
      }, 1000);
    }

    btnCatchStart.addEventListener("click", () => {
      if(catchRunning) catchStop();
      else catchStart();
    });

    // ========= GAME 2: MEMORY MATCH =========
    const memoryGrid = document.getElementById("memoryGrid");
    const memMovesEl = document.getElementById("memMoves");
    const memMatchedEl = document.getElementById("memMatched");
    const memTotalEl = document.getElementById("memTotal");
    document.getElementById("btnMemRestart").addEventListener("click", memInit);

    const icons = ["‚ù§Ô∏è","üíó","üå∏","üß∏","‚ú®","üçì"];
    let memTiles = [];
    let memFirst = null;
    let memLock = false;
    let memMoves = 0;
    let memMatched = 0;

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    function memInit(){
      const pairs = shuffle([...icons, ...icons]); // 12 tiles
      memTiles = pairs.map((v, idx) => ({ id: idx, v, revealed:false, matched:false }));
      memFirst = null;
      memLock = false;
      memMoves = 0;
      memMatched = 0;

      memMovesEl.textContent = memMoves;
      memMatchedEl.textContent = memMatched;
      memTotalEl.textContent = icons.length;

      memoryGrid.innerHTML = "";
      memTiles.forEach(t => {
        const div = document.createElement("button");
        div.type = "button";
        div.className = "tile";
        div.textContent = "‚ùî";
        div.dataset.id = t.id;
        div.addEventListener("click", () => memFlip(t.id));
        memoryGrid.appendChild(div);
      });
    }

    function tileEl(id){ return memoryGrid.querySelector(`.tile[data-id="${id}"]`); }

    function reveal(id){
      const t = memTiles[id];
      const el = tileEl(id);
      t.revealed = true;
      el.classList.add("revealed");
      el.textContent = t.v;
    }
    function hide(id){
      const t = memTiles[id];
      const el = tileEl(id);
      t.revealed = false;
      el.classList.remove("revealed");
      el.textContent = "‚ùî";
    }
    function match(a,b){
      memTiles[a].matched = true;
      memTiles[b].matched = true;
      const ea = tileEl(a), eb = tileEl(b);
      ea.classList.add("matched");
      eb.classList.add("matched");
    }

    function memFlip(id){
      if(memLock) return;
      const t = memTiles[id];
      if(t.matched || t.revealed) return;

      reveal(id);

      if(memFirst === null){
        memFirst = id;
        return;
      }

      memMoves++;
      memMovesEl.textContent = memMoves;

      const first = memFirst;
      memFirst = null;

      if(memTiles[first].v === memTiles[id].v){
        match(first, id);
        memMatched++;
        memMatchedEl.textContent = memMatched;

        if(memMatched === icons.length){
          completed.memory = true;
          updateProgress();
          openModal(
            "Game 2 complete üíó",
            `Memory queen, ${HER_NAME}. You‚Äôre too good.`,
            `Now the last game‚Ä¶ and the secret message unlocks.`,
            "Go to Game 3",
            () => { show("quiz"); quizReset(); }
          );
        }
      } else {
        memLock = true;
        setTimeout(() => {
          hide(first);
          hide(id);
          memLock = false;
        }, 650);
      }
    }

    // ========= GAME 3: QUIZ =========
    const qText = document.getElementById("qText");
    const qOpts = document.getElementById("qOpts");
    const quizCorrectEl = document.getElementById("quizCorrect");
    let quizIndex = 0;
    let quizCorrect = 0;

    const QUIZ = [
      {
        q: `If ${HER_NAME} is sad, what should I do?`,
        opts: [
          {t:"Listen + be there for her", ok:true},
          {t:"Ignore it", ok:false},
          {t:"Say ‚Äúdeal with it‚Äù", ok:false},
        ],
        good:`Exactly. Always choose care.`,
        bad:`Nope üòå The right answer is care.`
      },
      {
        q: `What‚Äôs my favorite thing about you, ${HER_NAME}?`,
        opts: [
          {t:"Your smile + your energy", ok:true},
          {t:"Nothing", ok:false},
          {t:"Only your phone", ok:false},
        ],
        good:`Yes. Your vibe is everything.`,
        bad:`Wrong üòå It‚Äôs your smile + your energy.`
      },
      {
        q: `Final question: Are you my favorite person?`,
        opts: [
          {t:"Yes ‚ù§Ô∏è", ok:true},
          {t:"No", ok:false},
          {t:"Maybe", ok:false},
        ],
        good:`Correct. Always yes.`,
        bad:`Try again üòå It‚Äôs always YES.`
      }
    ];

    function quizReset(){
      quizIndex = 0;
      quizCorrect = 0;
      quizCorrectEl.textContent = quizCorrect;
      renderQuestion();
    }

    function renderQuestion(){
      const item = QUIZ[quizIndex];
      qText.textContent = item.q;
      qOpts.innerHTML = "";
      item.opts.forEach(o => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "opt";
        b.textContent = o.t;
        b.addEventListener("click", () => answer(o.ok));
        qOpts.appendChild(b);
      });
    }

    function answer(ok){
      const item = QUIZ[quizIndex];

      if(ok){
        quizCorrect++;
        quizCorrectEl.textContent = quizCorrect;

        openModal(
          "Nice ‚ù§Ô∏è",
          item.good,
          (quizIndex === QUIZ.length-1)
            ? `You unlocked the secret message‚Ä¶`
            : `Next question, baby üòå`,
          (quizIndex === QUIZ.length-1) ? "Open message" : "Next",
          () => {
            if(quizIndex < QUIZ.length-1){
              quizIndex++;
              renderQuestion();
            } else {
              // final unlock
              completed.quiz = true;
              updateProgress();
              openModal(
                "Secret message üíó",
                `AYA, I love you so much.`,
                `Muaah‚Ä¶ you‚Äôre precious to me ‚ù§Ô∏è`,
                "Back to games",
                () => show("hub")
              );
            }
          }
        );
      } else {
        openModal(
          "Oops üòå",
          item.bad,
          `Try again, my baby ‚ù§Ô∏è`,
          "Retry",
          () => renderQuestion()
        );
      }
    }

    // Initialize
    show("intro");
    updateProgress();
  </script>
</body>
</html>
